<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LWS Assignment 1 - Scoreboard</title>

    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>

  <body>
    <h1>Redux Add Row Example</h1>
    <table>
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="rows-container"></tbody>
    </table>

    <div>
      <label for="first-name-input">First Name:</label>
      <input type="number" id="input1" />
    </div>
    <div>
      <label for="last-name-input">Last Name:</label>
      <input type="number" id="input2" />
    </div>
    <div>
      <label for="last-name-input">total</label>
      <input class="total" value="120" />
    </div>
    <button id="add-button" type="submit">Add Row</button>

    <script>
      // Define the initial state of the store
      const initialState = {
        rows: [],
      };

      // Define the reducer function
      function reducer(state = initialState, action) {
        console.log(state);
        switch (action.type) {
          case "ADD_ROW":
            return {
              ...state,
              rows: [...state.rows, action.payload],
            };
          default:
            return state;
        }
      }

      // Create the Redux store
      const store = Redux.createStore(reducer);

      function addRow(row) {
        return { type: "ADD_ROW", payload: row };
      }

      function handleAddRow() {
        const input1 = document.getElementById("input1").value;
        const input2 = document.getElementById("input2").value;

        // Create a new row object with the values from the input fields
        const row = { input1, input2 };

        // Dispatch the action to add the new row
        store.dispatch(addRow(row));
      }

      function renderRows(rows) {
        const rowsContainer = document.getElementById("rows-container");

        // Clear the rows container
        rowsContainer.innerHTML = "";

        // Render each row as a div with two input fields
        rows.forEach((row) => {
          const rowDiv = document.createElement("div");

          const input1 = document.createElement("input");
          input1.type = "text";
          input1.value = row.input1;
          rowDiv.appendChild(input1);

          const input2 = document.createElement("input");
          input2.type = "text";
          input2.value = row.input2;
          rowDiv.appendChild(input2);

          rowsContainer.appendChild(rowDiv);
        });
      }
      // Subscribe to the Redux store and re-render the rows whenever the state changes
      store.subscribe(() => {
        const state = store.getState();
        renderRows(state.rows);
      });

      // Render the initial rows
      renderRows(store.getState().rows);
      const addButton = document.getElementById("add-button");
      addButton.addEventListener("click", handleAddRow);
    </script>
  </body>
</html>
